!function(){"use strict";var app=angular.module("tpManager.controllers",[]);app.controller("SettingsController",["$scope","$rootScope","$location","toastr",function($scope,$rootScope,$location,toastr){void 0===$rootScope.meta&&$location.path("/new"),$rootScope.ni=new NetworkInterface($rootScope.meta),$rootScope.resize($rootScope),$.getJSON("config.json",function(data){for(var i=0;i<data.networkObjectList.length;i++)data.networkObjectList[i].index=i;$scope.networkObjectList=data.networkObjectList,$scope.softwareList=data.softwareList,$scope.$apply()}),$scope.backup=void 0;var oldId;$scope.submit=function(){oldId=$scope.node;for(var k in $scope.node)$scope.backup[k]=$scope.node[k];toastr.success("Modifications enregistrées")},$scope.$watch("backup.id",function(){angular.isUndefined($scope.backup)||$rootScope.updateRemovalDialogController($scope.backup)}),$scope.reset=function(){$scope.backup=$rootScope.ni.getCurrentNode(),$scope.node=angular.copy($scope.backup),$rootScope.updateRemovalDialogController($scope.node),$scope.iface=$scope.node.network_interfaces[0]},$scope.resetForm=function(){$scope.node=angular.copy($scope.backup),oldId=oldId||$scope.node.id,oldId!==$scope.node.id&&$rootScope.ni.update(),$scope.iface=$scope.node.network_interfaces[0],$scope.settings.$setPristine()},$scope.TAB={NEW:"new",SETTINGS:"settings"},$scope.sidebarIsDisplayed=!1,$scope.hideSidebar=function(){$scope.toggleSidebar(!1,$scope.TAB.NEW)},$scope.showSidebar=function(tab){$scope.toggleSidebar(!0,tab)},$scope.toggleSidebar=function(state,tab){var position=state?-16:-330;$("#tpCreatorSideBar").stop().animate({marginRight:position+"px"},300),state!=$scope.sidebarIsDisplayed&&($("#tpCreatorCanvas").find(".btn-fab").toggleClass("fa-plus-circle fa-times-circle"),$scope.sidebarIsDisplayed=!$scope.sidebarIsDisplayed),tab==$scope.TAB.SETTINGS?$("#settings-panel a").tab("show"):tab==$scope.TAB.NEW&&$("#components-panel a").tab("show")},$scope.showSidebar($scope.TAB.NEW)}]),app.controller("MetaDialogController",["$scope","$rootScope","toastr",function($scope,$rootScope,toastr){$scope.backup=void 0,$scope.submit=function(){if($scope.metaForm.$valid){for(var k in $scope.meta)$scope.backup[k]=$scope.meta[k];$scope.resetForm(),toastr.success("Modifications enregistrées")}},$scope.reset=function(){$scope.backup=$rootScope.meta,$scope.meta=angular.copy($scope.backup)},$scope.resetForm=function(){$scope.meta=angular.copy($scope.backup)},$rootScope.loadMetaDialogController=function(){$scope.reset()}}]),app.controller("RemovalDialogController",["$scope","$rootScope",function($scope,$rootScope){$scope.res,$rootScope.updateRemovalDialogController=function(res){$scope.res=res},$scope.deleteNode=function(){$rootScope.ni.tp.deleteResource($scope.res),$rootScope.ni.update()}}]),app.controller("NewTpController",["$scope","$rootScope","$location","$sessionStorage",function($scope,$rootScope,$location,$sessionStorage){try{sessionStorage.setItem("throw","Exception"),$rootScope.meta=$sessionStorage,sessionStorage.removeItem("throw")}catch(err){$rootScope.meta=void 0}$scope.submit=function(){$scope.mainForm.$valid&&($rootScope.meta=$scope.meta,$location.path("/edit"))},$scope.resetForm=function(){$scope.meta=void 0,delete $rootScope.meta.experiment,delete $rootScope.meta.author}}]),app.controller("ChangeLanguageController",["$scope","localization","$rootScope",function($scope,localisation,$rootScope){$scope.availableLanguages=[{name:"_HEADER_TEXT_LANGUAGE_ENGLISH_",code:"en"},{name:"_HEADER_TEXT_LANGUAGE_FRENCH_",code:"fr"},{name:"_HEADER_TEXT_LANGUAGE_GERMAN_",code:"de"}],$scope.selectLanguage=function(code){$rootScope.localeChangeFinished=!1,moment.locale(code),localisation.changeLanguage(code)},$scope.selectLanguage("fr")}])}();