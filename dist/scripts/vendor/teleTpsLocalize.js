"use strict";function LocalizationManager($http,$resource,$rootScope,$filter,language){var defaultLanguage="default",dictionary=[],resourceFileLoaded=!1,languageResource=$resource($filter("resource-location")("i18n","texts"),{locale:"@locale"},{get:{isArray:!0,cache:!1}});this.changeLanguage=function(l,cback){language=l,this.initLocalizedResources(cback)},this.selectedLanguage=function(){return language};var successCallback=function(data,cback){dictionary=data,resourceFileLoaded=!0,$rootScope.$broadcast("localizeResourcesUpdated"),angular.isDefined(cback)&&cback(data)};this.initLocalizedResources=function(cback){resourceFileLoaded=!1,languageResource.get({locale:language},function(data){successCallback(data,cback)},function(){languageResource.get({locale:defaultLanguage},function(data){successCallback(data,cback)},function(error2){angular.isDefined(cback)&&cback(error2)})})},this.getLocalizedObject=function(value){if(resourceFileLoaded&&dictionary!==[]&&dictionary.length>0){var entry=$filter("filter")(dictionary,{key:value})[0];if(angular.isDefined(entry))return entry}return{}},this.getLocalizedString=function(value,pluralForm){var obj=this.getLocalizedObject(value);return angular.isDefined(obj.value)&&""!==obj.value?angular.isDefined(pluralForm)&&pluralForm===!0&&angular.isDefined(obj.pluralForm)?obj.pluralForm:obj.value:"Unknown string id : "+value}}var teleTPsLocalization=angular.module("teleTPsLocalization",["ngResource"]);teleTPsLocalization.provider("localization",function(){var initialLanguage=void 0;this.setInitialLanguage=function(l){initialLanguage=l},this.$get=["$http","$resource","$rootScope","$filter","$window",function($http,$resource,$rootScope,$filter,$window){initialLanguage=initialLanguage||$window.navigator.userLanguage||$window.navigator.language;var idxInitLanguage=initialLanguage.indexOf("-");idxInitLanguage>-1&&(initialLanguage=initialLanguage.substring(0,idxInitLanguage));var locaMgr=new LocalizationManager($http,$resource,$rootScope,$filter,initialLanguage);return locaMgr.initLocalizedResources(),locaMgr}]}),teleTPsLocalization.filter("i18n",["localization",function(localization){return function(key,pluralForm){return localization.getLocalizedString(key,pluralForm)}}]);